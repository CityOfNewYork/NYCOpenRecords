{% extends "base.html" %}

{% block custom_css %}
    <link rel=stylesheet type=text/css href="{{ url_for('static', filename='styles/styles.css') }}"/>
{% endblock %}

{% block title %}
    View Request
{% endblock %}

{% block content %}
    <div class="container-fluid">
        <div class="row-fluid">
            <div class="jumbotron col-md-9">
                <h3 class="wrap-text">Request Information</h3>
                <h3 class="wrap-text">FOIL Number</h3>
                <h3 class="wrap-text">Title</h3>
                <h3 class="wrap-text">Request</h3>
            </div>
            <div class="col-md-3">
                <h3 class="wrap-text">Status</h3>
                <h3 class="wrap-text">In Progress</h3>
                <h3 class="wrap-text">Assigned Agency</h3>
                <h3 class="wrap-text">Assigned User</h3>
                <h3 class="wrap-text">Helpers</h3>
                </div>
            </div>
        </div>
        <div class="row-fluid col-md-12">
            <button type="button" class="btn btn-primary btn-sm">Add Record</button>
            <button type="button" class="btn btn-primary btn-sm">Add Note</button>
            <button type="button" class="btn btn-primary btn-sm">Extend Request</button>
            <button type="button" class="btn btn-primary btn-sm">Generate Letter</button>
            <button type="button" class="btn btn-primary btn-sm">Close Request</button>
            <button type="button" class="btn btn-primary btn-sm">Manage Helpers</button>
            <button type="button" class="btn btn-primary btn-sm">Edit Assignee</button>
        </div>
        <div class="row-fluid">
            <div class="col-md-8">
                {% include 'request/_view_request_responses.html' %}
            </div>
            <div class="col-md-4">
                {% include 'request/_view_request_history.html' %}
            </div>
        </div>
    </div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script type="text/javascript">
    $(document).ready(function() {
        var request_history_reload_index = 0;
{#        var request_history_index = 0;#}
        $.ajax({
            type: "POST",
            url: '/_get_request_history',
            dataType: 'json',
            data: JSON.stringify(request_history_reload_index),
            success: function (response) {
                var request_history = response;
                var request_history_section = [request_history.slice(request_history_index, request_history_index + 6)];
                console.log(response)
            },
            error: function (error) {
                console.log(error);
            }
        })
    });
</script>
<script type="text/javascript">
    function previous_history() {
        request_history_index = request_history_index - 5;
        request_history_section = [request_history.slice(request_history_index, request_history_index + 6)]
    }
</script>
<script type="text/javascript">
    function next_history() {
        request_history_index = request_history_index + 5;
        request_history_section = [request_history.slice(request_history_index, request_history_index + 6)]
    }
</script>
<script type="text/javascript">
    function load_more_history() {
        request_history_reload_index++;
        $.ajax({
            type: "POST",
            url: '/_get_request_responses',
            dataType: 'json',
            data: JSON.stringify(request_history_reload_index),
            success: function (response) {
                var request_history = response;
                var request_history_section = [request_history.slice(request_history_index, request_history_index + 6)];
                console.log(response)
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
</script>
<script type="text/javascript">
    $(document).ready(function() {
        var request_responses_reload_index = 0;
{#        var request_responses_index = 0;#}
        $.ajax({
            type: "POST",
            url: '/_get_request_responses',
            dataType: 'json',
            data: JSON.stringify(request_responses_reload_index),
            success: function (response) {
                var request_responses = response;
                var request_responses_section = [request_responses.slice(request_responses_index, request_responses_index + 11)];
                console.log(response)
            },
            error: function (error) {
                console.log(error);
            }
        })
    });
</script>
<script type="text/javascript">
    function previous_responses() {
        request_responses_index = request_responses_index - 10;
        request_responses_section = [request_responses.slice(request_responses_index, request_responses_index + 11)]
    }
</script>
<script type="text/javascript">
    function next_responses() {
        request_responses_index = request_responses_index + 10;
        request_responses_section = [request_responses.slice(request_responses_index, request_responses_index + 11)]
    }
</script>
<script type="text/javascript">
    function load_more_responses() {
        request_responses_reload_index++;
        $.ajax({
            type: "POST",
            url: '/_get_request_responses',
            dataType: 'json',
            data: JSON.stringify(request_responses_reload_index),
            success: function (response) {
                var request_responses = response;
                var request_responses_section = [request_responses.slice(request_responses_index, request_responses_index + 11)];
                console.log(response)
            },
            error: function (error) {
                console.log(error);
            }
        })
    }
</script>
{% endblock %}