<class="container-fluid">
{% if request.current_status == status.IN_PROGRESS %}
    <h1><span class="in-progress">In Progress</span></h1>
{% elif request.current_status == status.OVERDUE %}
    <h1><span class="overdue">Overdue</span></h1>
{% elif request.current_status == status.DUE_SOON %}
    <h1><span class="duesoon">Due Soon</span></h1>
{% elif request.current_status == status.OPEN %}
    <h1><span class="open">Open</span></h1>
{% elif request.current_status == status.RE_OPENED %}
    <h1><span class="reopened">Re-Opened</span></h1>
{% elif request.current_status == status.CLOSED %}
    <h1><span class="closed">Closed</span></h1>
{% endif %}

<hr>
<h4>{{ agency_name }} </h4>


<h4><a data-target="#requesterModal" data-toggle="modal" class="MainNavText" id="MainNavHelp"
       href="#requesterModal">{{ requester.name }}</a></h4>
{# Modal content for anon requesters #}
<div class="modal fade" id="requesterModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Requester Information</h4>
            </div>
            <div class="modal-body">
                <form id="user-info" action="/request/edit_requester_info/{{ request.id }}" method="POST">
                    <h3>{{ requester.name }}</h3>
                    {{ edit_requester_form.email.label }}
                    {{ edit_requester_form.email(id='inputEmail', type='email', class='form-control', value=requester.email)}}

                    {{ edit_requester_form.phone.label }}
                    {{ edit_requester_form.phone(id='inputTelephone', class='form-control', value=requester.phone_number) }}

                    {{ edit_requester_form.address_one.label }}
                    {{ edit_requester_form.address_one(id='inputAddressOne', class='form-control', value=requester.mailing_address['address_one']) }}

                    {{ edit_requester_form.address_two.label }}
                    {{ edit_requester_form.address_two(id='inputAddressTwo', class='form-control', value=requester.mailing_address['address_two']) }}

                    {{ edit_requester_form.city.label }}
                    {{ edit_requester_form.city(id='inputCity', class='form-control', value=requester.mailing_address['city']) }}

                    {{ edit_requester_form.zipcode.label }}
                    {{ edit_requester_form.zipcode(id='inputZip', class='form-control', value=requester.mailing_address['zip']) }}

                    {{ edit_requester_form.state.label }}
                    {{ edit_requester_form.state(id='inputState', class='form-control') }}

                    {{ edit_requester_form.organization.label }}
                    {{ edit_requester_form.organization(id='inputOrganization', class='form-control', value=requester.organization) }}

                    {{ edit_requester_form.fax.label }}
                    {{ edit_requester_form.fax(id='inputFax', class='form-control', value=requester.fax_number) }}

                    {{ edit_requester_form.submit(id='submit', class='btn btn-primary') }}
                </form>
            </div>

            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
            </div>
        </div>
    </div>
</div>

<hr>
<h4><a data-target="#assignedUserModal" data-toggle="modal" class="MainNavText" id="MainNavHelp"
       href="#assignedUserModal">Assigned User(s)</a></h4>
{# Modal content for assigned users #}
<div class="modal fade" id="assignedUserModal" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span
                        aria-hidden="true">&times;</span></button>
                <h4 class="modal-title">Agency User Information</h4>
            </div>
            <div class="modal-body">
                {% for user in users %}
                    <div>
                        <h3>Agency User Name</h3>
                            <p class="lead">{{ user.first_name }} {{ user.last_name }}</p>
                        <h3>Agency User Email</h3>
                            <p class="lead">{{ user.email }}</p>
                        <h3>Agency User Address</h3>
                            <p class="lead">{{ user.mailing_address['address_one']}}
                            {{ user.mailing_address['address_two']}}
                            {{ user.mailing_address['city']}}
                            {{ user.mailing_address['zip']}}
                            {{ user.mailing_address['state']}}</p>
                        <h3>Agency User Phone Number</h3>
                            <p class="lead">{{ user.phone_number }}</p>
                    </div>
                {% endfor %}
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                <button type="button" class="btn btn-primary">Save changes</button>
            </div>
        </div>
    </div>
</div>
<p>Due Date: {{ request.get_formatted_due_date() }}</p>
</div>

{% block custom_script %}
    <script type="text/javascript" src="{{ url_for('static',filename='js/plugins/parsley.min.js') }}"></script>
{% endblock %}


