<!-- This template is to initiate a new request. -->
{% extends "base.html" %}
{% from 'help_text.html' import help %}
{% block title %}New FOIL Request{% endblock title%}
{% block custom_css_links %}
<!-- used for the extension and close request multi-select boxes in city view -->
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/bootstrap-select.min.css') }}">
<!-- used for department dropdown -->
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/jquery-ui-1.10.4.custom.min.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/jquery-ui.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/bootstrap-combobox.css') }}"media="screen">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/sidebar.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/new_request.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/plugins/bootstrap-fileupload.css') }}">
<link rel=stylesheet type=text/css href="{{ url_for('static', filename='css/case.css') }}">
{% endblock custom_css_links %}
{% block container %}
<div class="row-fluid">
  <div class="span11 offset1">
    <div class="row-fluid">
      <div class="span7">
        <div class="row-fluid">
          <div class="span8">
            {% for message in errors %}
            <div class="alert alert-danger">
              <a href="#" class="close" data-dismiss="alert">&times;</a>
              {{ message }}
            </div>
            {% endfor %}
          </div>
        </div>
        <div class="row-fluid">
          <div class="span10">
            <h3>Create a New Request</h3>
            <p class="intro_text">
              The City of New York is commited to open government. If the record you need is not already available on <a href="http://www.getinfo.nyc/view_requests">this site</a>, the <a href="https://nycopendata.socrata.com/">OpenData Portal</a>, or the <a href="https://data.cityofnewyork.us/City-Government/City-Record-Online/dg92-zbpx">City Record Online</a> you may request it here.
            </p>
            <br/>
            <form name="input" class="form-horizontal" id="submitRequest" method="post" action="/new" autocomplete="off" novalidate="novalidate" enctype="multipart/form-data">
              <fieldset>
                <div class="control-group">
                  <h2><small>{{ form.request_category.label.text}}</small></h2>
                  {{ form.request_category(class="input-block-level")}}
                </div>
                <div class="control-group">
                  <h2><small>{{ form.request_agency.label.text}}</small></h2>
                  {{ form.request_agency(class="input-block-level") }}
                </div>
                <div class="control-group">
                  <h2><small>{{ form.request_summary.label.text}}</small></h2>
                  {{ form.request_summary(class="input-block-level", rows="2", id="request_summary", placeholder="Please provide a short summary of your request") }}
                  {# {{ help("requestSummaryPopover-content", "Enter summary of request")}} #}
                </div>
                <div class="control-group">
                  <h2><small>{{ form.request_privacy.label.text }}</small></h2>
                  {{ form.request_privacy(class="input-block-level") }}
                  {# {{ help("requestPrivacyPopover-content", "Summary privacy options") }} #}
                </div>
                <div class="control-group">
                  <h2><small>{{ form.request_text.label.text}}</small></h2>
                  <div>
                    {{ form.request_text(rows="4", id="request_text", class="input-block-level", placeholder="Provide more information about your request to help the City locate the record. If don’t know the record name, describe type of information you think it would contain and the approximate date range. Do not include private info – such as social security # or credit card.") }}
                    {# {{ help("requestTextPopover-content", "Enter detailed description of request") }} #}
                  </div>
                </div>
                <div class="spacer">&nbsp;</div>
                <h2>
                  <lead>Personal Information</lead>
                </h2>
                <h3><small>All information entered in this section will not be visibile to the public</small></h3>
                <div class="spacer" style="background-color: #FFFFFF">
                  <div class="row-fluid">
                  <div class="control-group span6">
                    <h2><small>{{ form.request_first_name.label.text }}</small></h2>
                    {{ form.request_first_name(class="input-block-level", type="text", placeholder="John") }}
                    {# {{ help("namePopover-content", "Enter name - agency") }} #}
                  </div>
                  <div class="control-group span6">
                    <h2><small>{{ form.request_last_name.label.text }}</small></h2>
                    {{ form.request_last_name(class="input-block-level", type="text", placeholder="Doe") }}
                    {# {{ help("namePopover-content", "Enter name - agency") }} #}
                  </div>
                </div>
                  <div class="control-group">
                    <h2><small>{{ form.request_role.label.text }}</small></h2>
                    {{ form.request_role(class="input-block-level", type="text", placeholder="Your role in your organization (if applicable)")}}
                    {# {{ help("rolePopover-content", "Enter role") }} #}
                  </div>
                  <div class="control-group">
                    <h2><small>{{ form.request_organization.label.text }}</small></h2>
                    {{ form.request_organization(class="input-block-level", type="text", placeholder="Your organization (if applicable)") }}
                    {# {{ help("organizationPopover-content", "Enter organization name") }} #}
                  </div>
                </div>
                <h2>
                  <lead>Contact Information</lead>
                </h2>
                <h3><small>All information entered in this section will not be visibile to the public</small></h3>
                <h3><small><strong>Please Note:</strong> At least one method of communication is required</small></h3>
                <div class="control-group">
                  <h2><small>{{ form.request_email.label.text}}</small></h2>
                  <div class="spacer well" style="background-color: #FFFFFF;">
                    {{ form.request_email(class="input-block-level", type="email", placeholder="requester@email.com") }}
                    {{ help("emailPopover-content", "Enter email address") }}
                  </div>
                  <h2><small>{{ form.request_phone.label.text}}</small></h2>
                  <div class="spacer spacer_phone well" style="background-color: #FFFFFF;">
                    {{ form.request_phone(class="input-block-level", type="tel", placeholder="(555) 555-5555") }}
                    {{ help("phonePopover-content", "Enter phone number") }}
                  </div>
                  <h2><small>{{ form.request_fax.label.text}}</small></h2>
                  <div class="spacer spacer_phone well" style="background-color: #FFFFFF;">
                    {{ form.request_fax(class="input-block-level", type="tel", placeholder="(555) 555-5555") }}
                    {{ help("phonePopover-content", "Enter phone number") }}
                  </div>
                  <h2><small>Address</small></h2>
                  <div class="well" style="background-color: #FFFFFF;">
                    {{ form.request_address_street.label.text}}
                    <div class="spacer">
                      {{ form.request_address_street(class="input-block-level", type="text", placeholder="123 Main Street") }}
                      {{ help("streetPopover-content", "Enter street") }}
                    </div>
                    <div class="row-fluid">
                      <div class="span5">
                        {{ form.request_address_city.label.text}}
                        <div class="spacer">
                          {{ form.request_address_city(class="input-block-level", type="text", placeholder="New York") }}
                          {{ help("cityPopover-content", "Enter city") }}
                        </div>
                      </div>
                      <div class="span4">
                        {{ form.request_address_state.label.text}}
                        <div class="spacer">
                          {{ form.request_address_state(class="input-block-level combobox") }}
                          {{ help("statePopover-content", "Enter state") }}
                        </div>
                      </div>
                      <div class="span3">
                        {{ form.request_address_zip.label.text}}
                        <div class="spacer">
                          {{ form.request_address_zip(class="input-block-level", type="text", placeholder="12345") }}
                          {{ help("zipPopover-content", "Enter zip") }}
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
                <div id="captcha">
                  {% if config['ENVIRONMENT'] != 'LOCAL' %}
                  <form method="post" action="/submit">
                    {{ recaptcha }}
                  </form>
                  {% endif %}
                </div>
                <div id="terms_of_use" class="control-group">
                  <p class="lead">{{ form.terms_of_use.label.text }}&nbsp;{{ form.terms_of_use }}</p>
                </div>
                <div id="requestButton" class="spacer">
                  <div>
                    <button type="submit" title="submit_request_button" class="btn btn-primary btn-large input-block-level">Submit request</button>
                  </div>
                </div>
              </fieldset>
            </form>
          </div>
        </div>
      </div>
      <div class="span4">
        <div class="row-fluid">
          {% block sidebar %}
          <div class="well r_sidebar hidden-phone">
            <h4>Example</h4>
            <!-- needs to be hooked up to prr_help.json PLEASE DELETE THIS COMMENT WHEN DONE -->
            <p class="example">I need a copy of the Mayor’s emails sent to the Department of Transportation between July 30, 2013 and August 8, 2013.</p>
            <p class="example">The emails should contain the words “bridge project” or “bridge development”.</p>
            <h4>Tips</h4>
            <ul>
              <li>Don't reveal personal information, like your social security number or home address.</li>
              <li>Limit your request by a date range.</li>
              <li>Provide the name of the record or take a guess.</li>
              <li>If you don't know the name of the record, describe the information you believe is contained in it.</li>
            </ul>
          </div>
          {% endblock sidebar %}
        </div>
      </div>
    </div>
  </div>
</div>
{% endblock container %}
{% block custom_script_links %}
<!-- used for department dropdown -->
<script type="text/javascript" src="{{ url_for('static', filename = 'js/plugins/bootstrap-combobox.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/plugins/jquery-ui-1.10.4.custom.min.js') }}"></script>
<script type="text/javascript" src="{{ url_for('static', filename='js/new_request.js') }}"></script>
{% if date %}
<script type="text/javascript">
  $(document).ready(function(){
    $("input[id^='request_date']").datepicker();
    $("input[id^='request_date']").val("{{ date }}");
  });
</script>
{% else %}
<script type="text/javascript">
  $(document).ready(function(){
    $("input[id^='request_date']").datepicker();
    $("input[id^='request_date']").val('');
  });
</script>
{% endif %}
<script type="text/javascript">
  $(document).ready(function() {
    $('.combobox').combobox();
  });
</script>
<script type="text/javascript">
  $(document).ready(function() {
    autosize($('#request_text'));
    autosize($('#request_summary'));
  });
</script>
<!-- For file uploads -->
<script type="text/javascript" src="{{ url_for('static', filename='js/plugins/bootstrap-fileupload.js') }}"></script>
{% endblock custom_script_links %}
